<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>GAME HUB MASTER OS - PSFree Edition</title>
    <script src="int64.js"></script>
    <script src="rop.js"></script>
    <script src="kexploit.js"></script>
    <script src="webkit.js"></script>
    <script src="psfree.js"></script> <style>
        /* تصميمك الأصلي (لا تغيير فيه) */
        :root { --primary: #00d4ff; --secondary: #00ff88; --danger: #ff4444; --gold: #ffd700; --bg: #0a0a0a; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; text-align: center; overflow-x: hidden; }
        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .header { font-size: 3rem; margin: 30px 0 10px; }
        .header span.w { color: var(--primary); text-shadow: 0 0 15px var(--primary); }
        .header span.g { color: var(--danger); text-shadow: 0 0 15px var(--danger); }
        .header span.h { color: var(--secondary); text-shadow: 0 0 15px var(--secondary); }
        .info-box { background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; margin: 20px auto; width: fit-content; border: 1px solid var(--primary); }
        .main-btn { background: linear-gradient(45deg, #c0a100, #ffd700); padding: 15px 40px; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .grid-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .category { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; padding: 20px; min-width: 300px; }
        .btn-sub { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 10px; margin: 5px; border-radius: 6px; cursor: pointer; width: 100px; }
        .btn-sub:hover { background: var(--primary); color: black; }
    </style>
</head>

<body onload="runPSFree();">
    <canvas id="canvas"></canvas>

    <div class="header">
        <span class="w">Welcome</span> <span class="g">Game</span> <span class="h">Hub</span>
    </div>

    <div class="info-box">
        <div id="helper">جاري تشغيل ثغرة PSFree (بدون فلاشة)...</div>
    </div>

    <div class="gold-btn-container">
        <button class="main-btn" onclick="r('goldhen.bin')">LAUNCH GOLDHEN 2.4</button>
    </div>

    <div class="grid-container">
        <div class="category" style="border-top: 3px solid var(--danger);">
            <h2 style="color: var(--danger);">FAN CONTROL</h2>
            <button class="btn-sub" onclick="r('fan60.bin')">60°C</button>
            <button class="btn-sub" onclick="r('fan70.bin')">70°C</button>
        </div>
        <div class="category" style="border-top: 3px solid var(--secondary);">
            <h2 style="color: var(--secondary);">GAME MODS</h2>
            <button class="btn-sub" onclick="r('gtava3.bin')">GTA V</button>
            <button class="btn-sub" onclick="r('oystersmenu129.bin')">RDR2</button>
        </div>
    </div>

    <script>
        function s(t) { document.getElementById('helper').innerText = t; }

        // نظام PSFree من كارو يقوم بتشغيل نفسه، لكننا نربطه بالواجهة هنا
        function runPSFree() {
            s("جاري اختراق المتصفح عبر PSFree... يرجى الانتظار");
            // في نظام كارو، يتم استدعاء الثغرة تلقائياً أو عبر دالة poc
            if(typeof poc === 'function') {
                setTimeout(poc, 1500);
            }
        }

        // هذه الدوال يناديها ملف kexploit.js عند النجاح
        function awaitpl() { 
            s("نجح اختراق المتصفح! ✅ الآن أدخل الفلاشة لتفعيل GoldHEN"); 
        }

        function allset() { 
            s("تم تفعيل النظام بالكامل! ✅ يمكنك تشغيل الألعاب الآن"); 
        }

        // دالة شحن البايلود (إصلاح مشكلة الأزرار)
        function loadPayload(path) {
            s("جاري إرسال البايلود...");
            var xhr = new XMLHttpRequest();
            xhr.open('GET', path, true);
            xhr.responseType = 'arraybuffer';
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var data = new Uint8Array(xhr.response);
                    try {
                        // استخدام محرك كارو للشحن
                        var pb = chain.syscall(477, 0, data.length, 7, 0x1000, -1, 0);
                        for (var i = 0; i < data.length; i++) { write8(pb.add32(i), data[i]); }
                        var ta = malloc(8);
                        chain.syscall(79, pb, 0, ta);
                        s("تم التشغيل بنجاح! ✅");
                    } catch (e) { 
                        s("خطأ: يجب أن تنجح الثغرة وتظهر رسالة (أدخل الفلاشة) أولاً"); 
                    }
                } else {
                    s("خطأ: تأكد من وجود الملف في مجلد payloads");
                }
            };
            xhr.send();
        }

        function r(f) { loadPayload("payloads/" + f); }

        // سكريبت النجوم (تصميمك)
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let stars = [];
        for(let i=0; i<80; i++) stars.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2, d: Math.random()*0.5});
        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height); ctx.fillStyle = "white";
            stars.forEach(st => {
                ctx.beginPath(); ctx.arc(st.x, st.y, st.r, 0, Math.PI*2); ctx.fill();
                st.y += st.d; if(st.y > canvas.height) st.y = 0;
            });
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
