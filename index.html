<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>GAME HUB MASTER OS - PSFree Edition</title>
    <script src="int64.js"></script>
    <script src="rop.js"></script>
    <script src="kexploit.js"></script>
    <script src="webkit.js"></script>
    <script src="psfree.js"></script> <style>
        /* تصميمك الأصلي (لا تغيير فيه) */
        :root { --primary: #00d4ff; --secondary: #00ff88; --danger: #ff4444; --gold: #ffd700; --bg: #0a0a0a; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; text-align: center; overflow-x: hidden; }
        #canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .header { font-size: 3rem; margin: 30px 0 10px; }
        .header span.w { color: var(--primary); text-shadow: 0 0 15px var(--primary); }
        .header span.g { color: var(--danger); text-shadow: 0 0 15px var(--danger); }
        .header span.h { color: var(--secondary); text-shadow: 0 0 15px var(--secondary); }
        .info-box { background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; margin: 20px auto; width: fit-content; border: 1px solid var(--primary); }
        .main-btn { background: linear-gradient(45deg, #c0a100, #ffd700); padding: 15px 40px; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .grid-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .category { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; padding: 20px; min-width: 300px; }
        .btn-sub { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 10px; margin: 5px; border-radius: 6px; cursor: pointer; width: 100px; }
        .btn-sub:hover { background: var(--primary); color: black; }
    </style>
</head>

<body onload="initHost();">
    <script>
        function s(t) { document.getElementById('helper').innerText = t; }

        // هذه الدوال مهمة جداً لملفات كارو
        function awaitpl() { s("نجح اختراق المتصفح! ✅ الآن أدخل الفلاشة"); }
        function allset() { s("تم تفعيل النظام بنجاح! ✅"); }

        function initHost() {
            s("جاري تشغيل محرك PSFree... يرجى الانتظار");
            
            // محاولة تشغيل الثغرة بأكثر من طريقة لضمان الاستجابة
            setTimeout(function() {
                if (typeof main === 'function') { main(); }
                else if (typeof poc === 'function') { poc(); }
                else { 
                    // إذا كان الملف يعمل تلقائياً، سنكتفي بتغيير الرسالة
                    s("المحرك يعمل في الخلفية... انتظر رسالة الفلاشة"); 
                }
            }, 2000);
        }

        // دالة شحن البايلود
        function r(f) {
            s("جاري شحن: " + f);
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'payloads/' + f, true);
            xhr.responseType = 'arraybuffer';
            xhr.onload = function() {
                if (xhr.status === 200) {
                    var data = new Uint8Array(xhr.response);
                    // الأوامر التقنية للشحن
                    var pb = chain.syscall(477, 0, data.length, 7, 0x1000, -1, 0);
                    for (var i = 0; i < data.length; i++) { write8(pb.add32(i), data[i]); }
                    var ta = malloc(8);
                    chain.syscall(79, pb, 0, ta);
                    s("تم التشغيل! ✅");
                }
            };
            xhr.send();
        }
    </script>
</body>
<html>
